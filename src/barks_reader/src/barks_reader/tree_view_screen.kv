<TreeViewScreen>:
    orientation: 'vertical' if self.width < self.height else 'horizontal'

    # Scroll view with top view image
    AnchorLayout:
        anchor_x: "left"
        anchor_y: "bottom"

        Label:
            opacity: 1 if root.main_files_not_loaded else 0
            text: root.main_files_not_loaded_msg
            multiline: True
            color: 1,0,0,1
            font_size: fm.error_main_view_font_size
            bold: True
            size_hint: 1, 1
            text_size: self.size
            halign: "center"
            valign: "middle"

        Image:
            color: root.top_view_image_color
            opacity: 0.3 if root.main_files_not_loaded else root.top_view_image_opacity
            source: root.top_view_image_source
            fit_mode: root.top_view_image_fit_mode
            mipmap: True

        BoxLayout:
            orientation: "vertical"

            # Vertical filler before scroll view.
            Widget:
                size_hint_y: 0.02

            ScrollView:
                id: scroll_view

                do_scroll_x: False
                do_scroll_y: True
                always_overscroll: False
                effect_cls: "ScrollEffect"
                scroll_type: ["bars", "content"]

                bar_color: (0.8, 0.8, 0.8, 1)
                bar_inactive_color: (0.8, 0.8, 0.8, 0.8)
                bar_width: dp(12)

                ReaderTreeView:
                    id: reader_tree_view
                    padding: dp(50)
                    indent_start: dp(50)
                    background_color: (0,1,0,1)
                    size_hint_y: None
                    height: self.minimum_height
