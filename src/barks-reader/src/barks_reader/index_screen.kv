<IndexMenuButton>:
    # This rule defines the style for the A-Z menu buttons
    background_normal: ''
    background_down: ''
    border: (0, 0, 0, 0)
    background_color: app.index_theme.MENU_BG_SELECTED if self.is_selected else app.index_theme.MENU_BG
    color: app.index_theme.MENU_TEXT
    bold: True
    canvas.after:
        Color:
            rgba: 0, 0, 0, 1
        Line:
            rectangle: self.x + dp(1), self.y + dp(1), self.width - dp(2), self.height - dp(2)
            width: dp(0.5)

<IndexItemButton>:
    # This rule defines the style for the index item buttons
    background_normal: ''
    background_down: ''
    border: (0, 0, 0, 0)
    background_color: app.index_theme.ITEM_BG
    color: app.index_theme.ITEM_TEXT
    size_hint: 1, None
    height: app.index_theme.ROW_HEIGHT
    padding: app.index_theme.INDEX_ITEM_LEFT_PAD, 0, 0, 0
    text_size: self.size
    halign: 'left'
    valign: 'middle'

<TitleItemButton>:
    # This rule defines the style for the title item buttons
    background_normal: ''
    background_down: ''
    border: (0, 0, 0, 0)
    background_color: app.index_theme.TITLE_BG_SELECTED if self.state == 'down' else app.index_theme.TITLE_BG
    color: app.index_theme.TITLE_TEXT
    size_hint: 1, None
    height: app.index_theme.ROW_HEIGHT
    text_size: self.size
    halign: 'left'
    valign: 'middle'

<IndexScreen>:
    opacity: 1 if root.is_visible else 0
    size_hint: (1, 1) if root.is_visible else (0, 0)

     # Have a white background for the whole screen
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    Image:
        texture: root.image_texture
        size_hint: (1, 1)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        fit_mode: "cover"
        opacity: 0.253  # Control the underlay "lightness" here
        mipmap: True

    GridLayout:
        id: alphabet_layout
        cols: 1
        size_hint_x: None
        width: dp(40)
        pos_hint: {'x': 0, 'y': 0}
        padding: dp(0)
        spacing: dp(2)

    ScrollView:
        id: index_scroll_view

        do_scroll_x: False
        do_scroll_y: True
        always_overscroll: False
        effect_cls: "ScrollEffect"
        scroll_type: ["bars", "content"]

        bar_color: (0.8, 0.8, 0.8, 1)
        bar_inactive_color: (0.8, 0.8, 0.8, 0.8)
        bar_width: dp(12)

        size_hint: None, None
        size: root.width - alphabet_layout.width - dp(15), 0.9 * root.height
        pos_hint: {'right': 1, 'top': 0.95}

        FloatLayout:
            size_hint_y: None
            height: max(left_column_layout.height, right_column_layout.height)

            BoxLayout:
                id: left_column_layout
                orientation: 'vertical'
                size_hint: 0.5, None
                height: self.minimum_height
                pos_hint: {'x': 0, 'top': 1}
                padding: 0, 0, 0, dp(20)

            BoxLayout:
                id: right_column_layout
                orientation: 'vertical'
                size_hint: 0.5, None
                height: self.minimum_height
                pos_hint: {'x': 0.5, 'top': 1}
                padding: 0, 0, 0, dp(20)

    Label:
        pos_hint: {'right': 1, 'y': 0}
        padding: [0, 0, dp(15), dp(8)]
        text: "[i]" + root.current_title_str + "[/i]"
        markup: True
        color: (0, 0, 0, 1)
        opacity: 0.5
        font_size: sp(15)
        # Make the widget size itself to fit the text
        size_hint: None, None
        size: self.texture_size
